<div
  class="flex flex-col md:flex-row md:justify-between md:items-center gap-3 mb-4"
>
  <h2 class="text-lg font-semibold">Data Kerjasama</h2>

  <div class="flex gap-2">
    <input
      id="searchKerjasama"
      oninput="handleSearch()"
      type="text"
      placeholder="Cari semua data..."
      class="input w-64"
    />

    <button
      onclick="openKerjasamaForm()"
      class="bg-purple-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-purple-700"
    >
      + Tambah Kerjasama
    </button>
  </div>
</div>

<div class="bg-white rounded-xl shadow overflow-x-auto">
  <table class="w-full text-sm table-fixed">
    <thead class="bg-gray-100">
      <tr>
        <th class="p-3 text-left w-48">Mitra</th>
        <th class="p-3 text-left w-32">Benua</th>
        <th class="p-3 text-left w-32">Negara</th>
        <th class="p-3 text-left w-40">Jumlah Implementasi</th>
        <th class="p-3 text-left w-32">Jenis Mitra</th>
        <th class="p-3 text-center w-24">Aksi</th>
      </tr>
    </thead>

    <tbody id="kerjasama-body"></tbody>
  </table>
</div>

<!-- PAGINATION HALAMAN -->
<div class="flex justify-between items-center mt-4 text-sm">
  <div id="pagination-info" class="text-gray-600"></div>

  <div class="flex gap-1" id="pagination"></div>
</div>

<!-- MODAL FORM (DETAIL + EDIT) -->
<div
  id="kerjasama-modal"
  class="fixed inset-0 bg-black/40 hidden flex items-center justify-center z-50"
>
  <div
    class="bg-white rounded-xl w-full max-w-4xl p-6 overflow-y-auto max-h-[90vh]"
  >
    <div class="flex justify-between items-center mb-4">
      <h3 id="modal-title" class="font-semibold text-lg">Detail Kerjasama</h3>
      <button onclick="closeKerjasamaForm()" class="text-gray-500">âœ•</button>
    </div>

    <input type="hidden" id="editIndex" />

    <div
      id="kerjasama-form"
      class="grid grid-cols-1 md:grid-cols-3 gap-3 text-sm"
    >
      <!-- INPUT SAMA PERSIS PUNYAMU -->
      <!-- Mitra -->
      <div class="flex flex-col gap-1 autocomplete-wrapper" id="mitra-wrapper">
        <label class="text-xs text-gray-500">Mitra</label>

        <input
          id="mitra"
          class="input"
          placeholder="Cari / ketik Mitra Kerjasama"
          onclick="showAllMitra()"
          oninput="filterMitraDropdown()"
          autocomplete="off"
        />

        <div id="k-no-dropdown" class="autocomplete-dropdown hidden"></div>
      </div>

      <!-- Benua -->
      <div class="flex flex-col gap-1">
        <label for="benua" class="text-xs text-gray-500">Benua</label>
        <select id="benua" class="input">
          <option value="">-- Pilih Benua --</option>
        </select>
      </div>

      <!-- Negara -->
      <div class="flex flex-col gap-1">
        <label for="negara" class="text-xs text-gray-500">Negara</label>
        <select id="negara" class="input">
          <option value="">-- Pilih Negara --</option>
        </select>
      </div>

      <!-- Mitra Terkait -->
      <div class="flex flex-col gap-1">
        <label for="mitraTerkait" class="text-xs text-gray-500"
          >Mitra Terkait</label
        >
        <input id="mitraTerkait" class="input" />
      </div>

      <!-- Link File -->
      <div class="flex flex-col gap-1">
        <label for="linkFile" class="text-xs text-gray-500">Link File</label>
        <input id="linkFile" class="input" />
      </div>

      <!-- Unit -->
      <div class="flex flex-col gap-1">
        <label for="unit" class="text-xs text-gray-500">
          Fak / Prodi / Satker
        </label>
        <select id="unit" class="input">
          <option value="">-- Pilih Fakultas / Satker --</option>
        </select>
      </div>

      <!-- No Surat -->
      <div class="flex flex-col gap-1">
        <label for="noSurat" class="text-xs text-gray-500"
          >No Surat Dokumen</label
        >
        <input id="noSurat" class="input" />
      </div>

      <!-- Jenis Mitra -->
      <div class="flex flex-col gap-1">
        <label for="jenisMitra" class="text-xs text-gray-500"
          >Jenis Mitra</label
        >
        <select id="jenisMitra" class="input">
          <option value="">-- Pilih Jenis Mitra --</option>
        </select>
      </div>

      <!-- Jenis Dokumen -->
      <div class="flex flex-col gap-1">
        <label for="jenisDokumen" class="text-xs text-gray-500">
          Jenis Dokumen
        </label>
        <select id="jenisDokumen" class="input">
          <option value="">-- Pilih Jenis Dokumen --</option>
          <option value="MoU">MoU (Memorandum of Understanding)</option>
          <option value="MoA">MoA (Memorandum of Agreement)</option>
          <option value="IA">IA (Implementation Arrangement)</option>
        </select>
      </div>

      <!-- Tingkat -->
      <div class="flex flex-col gap-1">
        <label for="tingkat" class="text-xs text-gray-500">
          Tingkat Kerjasama
        </label>
        <select id="tingkat" class="input">
          <option value="">-- Pilih Tingkat Kerjasama --</option>
          <option value="Lokal">Lokal</option>
          <option value="Nasional">Nasional</option>
          <option value="Internasional">Internasional</option>
        </select>
      </div>

      <!-- Status -->
      <div class="flex flex-col gap-1">
        <label for="status" class="text-xs text-gray-500">
          Status Kerjasama
        </label>
        <input id="status" class="input" readonly />
      </div>

      <!-- Tanggal Mulai -->
      <div class="flex flex-col gap-1">
        <label for="tglMulai" class="text-xs text-gray-500"
          >Tanggal Mulai</label
        >
        <input type="date" id="tglMulai" class="input" />
      </div>

      <!-- Tanggal Berakhir -->
      <div class="flex flex-col gap-1">
        <label for="tglBerakhir" class="text-xs text-gray-500"
          >Tanggal Berakhir</label
        >
        <input type="date" id="tglBerakhir" class="input" />
      </div>

      <!-- Tahun Mulai -->
      <div class="flex flex-col gap-1">
        <label for="tahunMulai" class="text-xs text-gray-500">
          Tahun Mulai
        </label>
        <input id="tahunMulai" class="input" readonly />
      </div>

      <!-- Tahun Berakhir -->
      <div class="flex flex-col gap-1">
        <label for="tahunBerakhir" class="text-xs text-gray-500">
          Tahun Berakhir
        </label>
        <input id="tahunBerakhir" class="input" readonly />
      </div>

      <!-- Keterangan -->
      <div class="flex flex-col gap-1 md:col-span-3">
        <label for="keterangan" class="text-xs text-gray-500">Keterangan</label>
        <textarea id="keterangan" class="input"></textarea>
      </div>
    </div>

    <!-- FOOTER -->
    <div class="flex justify-end gap-2 mt-5">
      <button
        id="btn-edit"
        onclick="switchToEdit()"
        class="px-4 py-2 bg-blue-600 text-white rounded-lg hidden"
      >
        Edit
      </button>

      <button
        id="btn-cancel"
        onclick="closeKerjasamaForm()"
        class="px-4 py-2 border rounded-lg"
      >
        Tutup
      </button>

      <button
        id="btn-save"
        onclick="saveKerjasama()"
        class="px-4 py-2 bg-purple-600 text-white rounded-lg hidden"
      >
        Simpan
      </button>
    </div>
  </div>
</div>
